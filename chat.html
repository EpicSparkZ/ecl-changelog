<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chat</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
</head>
<body>

<!-- Sign Up Form -->
<div id="sign-up-form">
  <h2>Sign Up</h2>
  <input type="email" id="sign-up-email" placeholder="Email" />
  <input type="password" id="sign-up-password" placeholder="Password" />
  <button onclick="signUp()">Sign Up</button>
</div>

<!-- Login Form -->
<div id="login-form" style="display: none;">
  <h2>Log In</h2>
  <input type="email" id="login-email" placeholder="Email" />
  <input type="password" id="login-password" placeholder="Password" />
  <button onclick="logIn()">Log In</button>
</div>

<!-- Your existing chat HTML content goes below -->
<div id="message-container" style="display:none;">
  <!-- Messages will show here -->
</div>
<div id="input-bar" style="display:none;">
  <!-- Your chat input UI -->
</div>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    databaseURL: "YOUR_DATABASE_URL",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);

  function signUp() {
    const email = document.getElementById('sign-up-email').value;
    const password = document.getElementById('sign-up-password').value;

    firebase.auth().createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        alert('Sign-up successful!');
        document.getElementById('sign-up-form').style.display = 'none';
        document.getElementById('login-form').style.display = 'block';
      })
      .catch((error) => {
        alert('Error: ' + error.message);
      });
  }

  function logIn() {
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    firebase.auth().signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        alert('Login successful!');
        document.getElementById('login-form').style.display = 'none';
        showChat();
      })
      .catch((error) => {
        alert('Error: ' + error.message);
      });
  }

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      showChat();
    } else {
      document.getElementById('sign-up-form').style.display = 'block';
      document.getElementById('login-form').style.display = 'block';
    }
  });

  function showChat() {
    document.getElementById('message-container').style.display = 'block';
    document.getElementById('input-bar').style.display = 'block';
    document.getElementById('sign-up-form').style.display = 'none';
    document.getElementById('login-form').style.display = 'none';
  }
</script>

</body>
</html>
